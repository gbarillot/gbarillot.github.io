<!DOCTYPE html>
<html>
<head>
<title>I build stuff: La fonction PHP Mail() et l’antispam d’Orange.fr</title>
<meta content='Je viens de découvrir à mes dépends que le Mail d’Orange.fr refuse systématiquement les Mails dont le “Return-Path” n’est pas dûment renseigné. ...' name='description'>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='True' name='HandheldFriendly'>
<meta content='UlIFhV8FstDJpoRovjvM0LzmXqguqwhyqNDL5DyKaGQ' name='google-site-verification'>
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
<link href="/images/favicon.ico" rel="icon" type="image/ico" />
<link href="/stylesheets/application.css" rel="stylesheet" type="text/css" />
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<link href='//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400' rel='stylesheet' type='text/css'>
</head>
<body class='post-template nav-closed'>
<div class='nav'>
<h3 class='nav-title'>Menu</h3>
<a class='nav-close' href='#'>
<span class='hidden'>Close</span>
</a>
<ul>
</ul>
<a class='subscribe-button icon-feed' href='/feed.xml'>Subscribe</a>
</div>
<span class='nav-cover'></span>

<div class='site-wrapper'>
<div class='social'>
<ul class='no-bullet'>
<li>
<a href="https://twitter.com/gbarillot" target="_blank"><i class='fa fa-twitter'></i>
</a></li>
<li>
<a href="https://github.com/gbarillot" target="_blank"><i class='fa fa-github'></i>
</a></li>
<li>
<script>
  document.write('<a href="ma');
  document.write('ilto');
  document.write(':&#103;&#117;&#105;&#108;&#108;&#097;&#117;&#109;');
  document.write('&#101;&#064;&#098;&#097;&#114;&#105;&#108;&#108;&#111;&#116;&#046;&#109;&#101;">');
  document.write("<i class='fa fa-envelope'></i>");
  document.write('<\/a>');
</script>
<noscript>
&#103;&#98;&#97;&#114;&#105;&#108;&#108;&#111;&#116; at &#103;&#109;&#97;&#105;&#108; dot &#99;&#111;&#109;
</noscript>
</li>
<li>
<a href="https://fr.linkedin.com/pub/guillaume-barillot/27/204/4b9" target="_blank"><i class='fa fa-linkedin'></i>
</a></li>
</ul>
</div>
<header class='main-header no-cover post-head'>
<nav class='main-nav clearfix'>
</nav>
</header>
<main class='content' role='main'>
<article class='post'>
<header class='post-header'>
<h1 class='post-title'>La fonction PHP Mail() et l’antispam d’Orange.fr</h1>
<section class='post-meta'>
<time class='post-date' datetime='2009-10-22'>
22 October 2009
</time>
on <a href='/tag/php/'>php</a>
</section>
</header>
<section class='post-content'><p>Je viens de découvrir à mes dépends que le Mail d’Orange.fr refuse systématiquement les Mails dont le “Return-Path” n’est pas dûment renseigné. Le message n’est même pas passé en Spam, il n’arrive tout simplement… jamais!</p>

<p>La solution pour PHP, est d’utiliser le cinquième argument au moment de l’appel de la fonction mail (je vous passe le formatage du reste du Mail, y’a déja plein d’autres articles là dessus) :$return<em>path = &ldquo;-f&rdquo; . &ldquo;postmaster@monsite.fr&rdquo;;
mail($to, $sujet, $message, $header, $return</em>path);
Quant à Rails, il suffit de bien renseigner son /config/environnement.rb</p>

<p>ActionMailer::Base.delivery<em>method = :sendmail
ActionMailer::Base.sendmail</em>settings = {
  :location       =&gt; &rsquo;/usr/sbin/sendmail&rsquo;,
  :arguments      =&gt; &rsquo;-i -t -f postmaster@monsite.fr&rsquo;
}
En espérant que ça puisse aider quelqu’un afin d’économiser une heure de temps précieux comme je viens de le faire…</p>
</section>
<footer class='post-footer'>
<section class='author'>
<h4>
<a href='/author/guillaume/'>Guillaume</a>
</h4>
<p></p>
Read
<a href='/author/guillaume/'>more posts</a>
by this author.
</section>
<section class='share'>
<h4>Share this post</h4>
<a class='icon-twitter' href='https://twitter.com/share?text=La fonction PHP Mail() et l’antispam d’Orange.fr&amp;amp;url=http://www.guillaume-barillot.com/2009/10/22/La-fonction-PHP-Mail-et-lantispam-dOrangefr/' onclick='window.open(this.href, &#39;twitter-share&#39;, &#39;width=550,height=235&#39;);return false;'>
<span class='hidden'>Twitter</span>
</a>
<a class='icon-facebook' href='https://www.facebook.com/sharer/sharer.php?u=http://www.guillaume-barillot.com/2009/10/22/La-fonction-PHP-Mail-et-lantispam-dOrangefr/' onclick='window.open(this.href, &#39;facebook-share&#39;,&#39;width=580,height=296&#39;);return false;'>
<span class='hidden'>Facebook</span>
</a>
<a class='icon-google-plus' href='https://plus.google.com/share?url=http://www.guillaume-barillot.com/2009/10/22/La-fonction-PHP-Mail-et-lantispam-dOrangefr/' onclick='window.open(this.href, &#39;google-plus-share&#39;, &#39;width=490,height=530&#39;);return false;'>
<span class='hidden'>Google+</span>
</a>
</section>
</footer>
</article>
</main>
<aside class='read-next'>
<a class='no-cover read-next-story' href='/2009/10/15/Quelques-kilos-en-trop/'>
<section class='post'>
<h2>Quelques kilos en trop</h2>
<p>J’avoue être complétement abasourdi par cette nouvelle, je cite 20Mn.fr :&gt;les dépôts de Plutonium (ndlr : de la centrale&hellip;</p>
</section>
</a>
<a class='no-cover prev read-next-story' href='/2009/11/17/HAML-Awesome-/'>
<section class='post'>
<h2>HAML ? Awesome !</h2>
<p>Au hasard de mon bêta test de Forgeos Commerce, je viens de découvrir HAML. Autant être clair, je n’ai&hellip;</p>
</section>
</a>
</aside>

<footer class='site-footer clearfix'>
<section class='copyright'>
<a href='/'>I build stuff</a>
&copy;
2022
</section>
<section class='poweredby'>
Casper theme powered by
<a href='https://ghost.org'>Ghost</a>
</section>
</footer>
</div>
<script src="/javascripts/application.js" type="text/javascript"></script>
</body>
</html>
